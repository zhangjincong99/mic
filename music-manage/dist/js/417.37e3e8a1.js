"use strict";(self["webpackChunkmusic_manage"]=self["webpackChunkmusic_manage"]||[]).push([[417],{179:function(e,t,l){l.d(t,{JO:function(){return n},c6:function(){return a},wC:function(){return o}});var n;(function(e){e["BOFANG"]="#icon-bofanganniu",e["ZANTING"]="#icon-zanting"})(n||(n={}));const a="Yin-music 后台管理";var o;(function(e){e["Home"]="/home",e["Info"]="/info",e["Song"]="/song",e["Singer"]="/singer",e["SongList"]="/songList",e["ListSong"]="/listSong",e["Comment"]="/Comment",e["Consumer"]="/consumer",e["Collect"]="/collect",e["Error"]="/404",e["SignIn"]="/",e["SignOut"]="0"})(o||(o={}))},8045:function(e,t,l){l.d(t,{Z:function(){return i}});l(7658);var n=l(3396),a=l(4870),o=l(179);function i(){const{proxy:e}=(0,n.FN)(),t=(0,a.iH)(["jpg","jpeg","png","gif"]);function l(e){return 0===e?"女":1===e?"男":2===e?"组合":3===e?"不明":"男"===e||"女"===e?e:void 0}function i(l){const n=2,a=l.size/1024/1024<n,o=t.value.includes(l.type.replace(/image\//,""));return o||e.$message.error(`图片只支持 ${t.value.join("、")} 格式!`),a||e.$message.error(`上传头像图片大小不能超过 ${n}MB!`),o&&a}function r(t){const l=10,n=t.size/1024/1024<l,a=t.name.substring(t.name.lastIndexOf(".")+1),o="mp3"===a;return o||e.$message({message:"上传文件只能是mp3格式！",type:"error"}),n||e.$message.error(`上传头像图片大小不能超过 ${l}MB!`),o&&n}function u(t,l){switch(t){case o.wC.Song:case o.wC.ListSong:case o.wC.Comment:case o.wC.Consumer:case o.wC.Collect:e.$router.push({path:l.path,query:l.query});break;case o.wC.Home:case o.wC.SignIn:case o.wC.SignOut:case o.wC.Info:case o.wC.Singer:case o.wC.SongList:case o.wC.Error:default:e.$router.push({path:l.path});break}}function s(t=-1){e.$router.go(t)}return{changeSex:l,routerManager:u,goBack:s,beforeImgUpload:i,beforeSongUpload:r}}},8968:function(e,t,l){l.d(t,{Z:function(){return d}});var n=l(3396);const a=(0,n._)("div",{class:"del-dialog-cnt",align:"center"},"删除不可恢复，是否确定删除？",-1),o={class:"dialog-footer"};function i(e,t,l,i,r,u){const s=(0,n.up)("el-button"),c=(0,n.up)("el-dialog");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(c,{title:"提示",modelValue:e.centerDialogVisible,"onUpdate:modelValue":t[0]||(t[0]=t=>e.centerDialogVisible=t),width:"300px",center:""},{footer:(0,n.w5)((()=>[(0,n._)("span",o,[(0,n.Wm)(s,{onClick:e.cancelRow},{default:(0,n.w5)((()=>[(0,n.Uk)("取 消")])),_:1},8,["onClick"]),(0,n.Wm)(s,{type:"primary",onClick:e.confirm},{default:(0,n.w5)((()=>[(0,n.Uk)("确 定")])),_:1},8,["onClick"])])])),default:(0,n.w5)((()=>[a])),_:1},8,["modelValue"])])}var r=l(4870),u=(0,n.aZ)({props:{delVisible:Boolean},emits:["cancelRow","confirm"],setup(e){const{proxy:t}=(0,n.FN)(),{delVisible:l}=(0,r.BK)(e),a=(0,r.iH)(l.value);function o(){t.$emit("cancelRow",!1)}function i(){t.$emit("confirm",null)}return(0,n.YP)(l,(e=>{a.value=e})),{centerDialogVisible:a,cancelRow:o,confirm:i}}}),s=l(89);const c=(0,s.Z)(u,[["render",i]]);var d=c},7417:function(e,t,l){l.r(t),l.d(t,{default:function(){return y}});var n=l(3396),a=l(7139);const o={class:"container"},i={class:"handle-box"},r=["src"],u={style:{height:"100px",overflow:"scroll"}},s={class:"dialog-footer"},c={class:"dialog-footer"};function d(e,t,l,d,m,g){const p=(0,n.up)("el-button"),f=(0,n.up)("el-input"),w=(0,n.up)("el-table-column"),C=(0,n.up)("el-upload"),h=(0,n.up)("el-table"),b=(0,n.up)("el-pagination"),y=(0,n.up)("el-form-item"),v=(0,n.up)("el-form"),V=(0,n.up)("el-dialog"),W=(0,n.up)("yin-del-dialog");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",o,[(0,n._)("div",i,[(0,n.Wm)(p,{onClick:e.deleteAll},{default:(0,n.w5)((()=>[(0,n.Uk)("批量删除")])),_:1},8,["onClick"]),(0,n.Wm)(f,{modelValue:e.searchWord,"onUpdate:modelValue":t[0]||(t[0]=t=>e.searchWord=t),placeholder:"筛选关键词"},null,8,["modelValue"]),(0,n.Wm)(p,{type:"primary",onClick:t[1]||(t[1]=t=>e.centerDialogVisible=!0)},{default:(0,n.w5)((()=>[(0,n.Uk)("添加歌单")])),_:1})]),(0,n.Wm)(h,{height:"550px",border:"",size:"small",data:e.data,onSelectionChange:e.handleSelectionChange},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{type:"selection",width:"40",align:"center"}),(0,n.Wm)(w,{label:"ID",prop:"id",width:"50",align:"center"}),(0,n.Wm)(w,{label:"歌单图片",width:"110",align:"center"},{default:(0,n.w5)((t=>[(0,n._)("img",{src:e.attachImageUrl(t.row.pic),style:{width:"80px"}},null,8,r),(0,n.Wm)(C,{action:e.uploadUrl(t.row.id),"show-file-list":!1,"on-success":e.handleImgSuccess,"before-upload":e.beforeImgUpload},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)("更新图片")])),_:1})])),_:2},1032,["action","on-success","before-upload"])])),_:1}),(0,n.Wm)(w,{prop:"title",label:"标题",width:"200"}),(0,n.Wm)(w,{label:"简介"},{default:(0,n.w5)((e=>[(0,n._)("p",u,(0,a.zw)(e.row.introduction),1)])),_:1}),(0,n.Wm)(w,{label:"风格",prop:"style",width:"100"}),(0,n.Wm)(w,{label:"内容",width:"90",align:"center"},{default:(0,n.w5)((t=>[(0,n.Wm)(p,{onClick:l=>e.goContentPage(t.row.id)},{default:(0,n.w5)((()=>[(0,n.Uk)("内容")])),_:2},1032,["onClick"])])),_:1}),(0,n.Wm)(w,{label:"评论",width:"90",align:"center"},{default:(0,n.w5)((t=>[(0,n.Wm)(p,{onClick:l=>e.goCommentPage(t.row.id)},{default:(0,n.w5)((()=>[(0,n.Uk)("评论")])),_:2},1032,["onClick"])])),_:1}),(0,n.Wm)(w,{label:"操作",width:"160",align:"center"},{default:(0,n.w5)((t=>[(0,n.Wm)(p,{onClick:l=>e.editRow(t.row)},{default:(0,n.w5)((()=>[(0,n.Uk)("编辑")])),_:2},1032,["onClick"]),(0,n.Wm)(p,{type:"danger",onClick:l=>e.deleteRow(t.row.id)},{default:(0,n.w5)((()=>[(0,n.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"]),(0,n.Wm)(b,{class:"pagination",background:"",layout:"total, prev, pager, next","current-page":e.currentPage,"page-size":e.pageSize,total:e.tableData.length,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onCurrentChange"])]),(0,n.Wm)(V,{title:"添加歌单",modelValue:e.centerDialogVisible,"onUpdate:modelValue":t[6]||(t[6]=t=>e.centerDialogVisible=t)},{footer:(0,n.w5)((()=>[(0,n._)("span",s,[(0,n.Wm)(p,{onClick:t[5]||(t[5]=t=>e.centerDialogVisible=!1)},{default:(0,n.w5)((()=>[(0,n.Uk)("取 消")])),_:1}),(0,n.Wm)(p,{type:"primary",onClick:e.addsongList},{default:(0,n.w5)((()=>[(0,n.Uk)("确 定")])),_:1},8,["onClick"])])])),default:(0,n.w5)((()=>[(0,n.Wm)(v,{"label-width":"70px",model:e.registerForm},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{label:"歌单名",prop:"title"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{modelValue:e.registerForm.title,"onUpdate:modelValue":t[2]||(t[2]=t=>e.registerForm.title=t)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(y,{label:"歌单介绍",prop:"introduction"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{modelValue:e.registerForm.introduction,"onUpdate:modelValue":t[3]||(t[3]=t=>e.registerForm.introduction=t)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(y,{label:"风格",prop:"style"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{modelValue:e.registerForm.style,"onUpdate:modelValue":t[4]||(t[4]=t=>e.registerForm.style=t)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,n.Wm)(V,{title:"编辑",modelValue:e.editVisible,"onUpdate:modelValue":t[11]||(t[11]=t=>e.editVisible=t)},{footer:(0,n.w5)((()=>[(0,n._)("span",c,[(0,n.Wm)(p,{onClick:t[10]||(t[10]=t=>e.editVisible=!1)},{default:(0,n.w5)((()=>[(0,n.Uk)("取 消")])),_:1}),(0,n.Wm)(p,{type:"primary",onClick:e.saveEdit},{default:(0,n.w5)((()=>[(0,n.Uk)("确 定")])),_:1},8,["onClick"])])])),default:(0,n.w5)((()=>[(0,n.Wm)(v,{model:e.editForm},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{label:"标题"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{modelValue:e.editForm.title,"onUpdate:modelValue":t[7]||(t[7]=t=>e.editForm.title=t)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(y,{label:"简介"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{type:"textarea",modelValue:e.editForm.introduction,"onUpdate:modelValue":t[8]||(t[8]=t=>e.editForm.introduction=t)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(y,{label:"风格"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{modelValue:e.editForm.style,"onUpdate:modelValue":t[9]||(t[9]=t=>e.editForm.style=t)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,n.Wm)(W,{delVisible:e.delVisible,onConfirm:e.confirm,onCancelRow:t[12]||(t[12]=t=>e.delVisible=t)},null,8,["delVisible","onConfirm"])],64)}l(7658),l(2062);var m=l(4870),g=l(8045),p=l(2167),f=l(179),w=l(8968),C=(0,n.aZ)({components:{YinDelDialog:w.Z},setup(){const{proxy:e}=(0,n.FN)(),{routerManager:t,beforeImgUpload:l}=(0,g.Z)(),a=(0,m.iH)([]),o=(0,m.iH)([]),i=(0,m.iH)(5),r=(0,m.iH)(1),u=(0,n.Fl)((()=>a.value.slice((r.value-1)*i.value,r.value*i.value))),s=(0,m.iH)("");async function c(){a.value=[],o.value=[];const e=await p.x.getSongList();a.value=e.data,o.value=e.data,r.value=1}function d(e){r.value=e}function w(e){return p.x.attachImageUrl(`/songList/img/update?id=${e}`)}function C(t,l){e.$message({message:t.message,type:t.type}),t.success&&c()}function h(l){const n=(0,m.qj)([{path:f.wC.SongList,name:"歌单管理"},{path:"",name:"歌单内容"}]);e.$store.commit("setBreadcrumbList",n),t(f.wC.ListSong,{path:f.wC.ListSong,query:{id:l}})}function b(l){const n=(0,m.qj)([{path:f.wC.SongList,name:"歌单管理"},{path:"",name:"评论详情"}]);e.$store.commit("setBreadcrumbList",n),t(f.wC.Comment,{path:f.wC.Comment,query:{id:l,type:1}})}(0,n.YP)(s,(()=>{if(""===s.value)a.value=o.value;else{a.value=[];for(let e of o.value)e.title.includes(s.value)&&a.value.push(e)}})),c();const y=(0,m.iH)(!1),v=(0,m.qj)({title:"",introduction:"",style:""});async function V(){let t=new URLSearchParams;t.append("title",v.title),t.append("introduction",v.introduction),t.append("style",v.style);const l=await p.x.setSongList(t);e.$message({message:l.message,type:l.type}),l.success&&(c(),v.title="",v.introduction="",v.style=""),y.value=!1}const W=(0,m.iH)(!1),k=(0,m.qj)({id:"",title:"",pic:"",introduction:"",style:""});function _(e){S.value=e.id,k.id=e.id,k.title=e.title,k.pic=e.pic,k.introduction=e.introduction,k.style=e.style,W.value=!0}async function U(){let t=new URLSearchParams;t.append("id",k.id),t.append("title",k.title),t.append("introduction",k.introduction),t.append("style",k.style);const l=await p.x.updateSongListMsg(t);e.$message({message:l.message,type:l.type}),l.success&&c(),W.value=!1}const S=(0,m.iH)(-1),F=(0,m.iH)([]),L=(0,m.iH)(!1);async function x(){const t=await p.x.deleteSongList(S.value);e.$message({message:t.message,type:t.type}),t.success&&c(),L.value=!1}function $(e){S.value=e,L.value=!0}function I(e){F.value=e}function D(){for(let e of F.value)$(e.id),x();F.value=[]}return{searchWord:s,data:u,tableData:a,centerDialogVisible:y,editVisible:W,delVisible:L,pageSize:i,currentPage:r,registerForm:v,editForm:k,addsongList:V,deleteAll:D,handleSelectionChange:I,handleImgSuccess:C,beforeImgUpload:l,saveEdit:U,attachImageUrl:p.x.attachImageUrl,uploadUrl:w,editRow:_,handleCurrentChange:d,confirm:x,deleteRow:$,goContentPage:h,goCommentPage:b}}}),h=l(89);const b=(0,h.Z)(C,[["render",d]]);var y=b}}]);
//# sourceMappingURL=417.37e3e8a1.js.map