"use strict";(self["webpackChunkmusic_manage"]=self["webpackChunkmusic_manage"]||[]).push([[328],{8968:function(e,l,a){a.d(l,{Z:function(){return d}});var n=a(3396);const t=(0,n._)("div",{class:"del-dialog-cnt",align:"center"},"删除不可恢复，是否确定删除？",-1),o={class:"dialog-footer"};function i(e,l,a,i,u,c){const r=(0,n.up)("el-button"),s=(0,n.up)("el-dialog");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(s,{title:"提示",modelValue:e.centerDialogVisible,"onUpdate:modelValue":l[0]||(l[0]=l=>e.centerDialogVisible=l),width:"300px",center:""},{footer:(0,n.w5)((()=>[(0,n._)("span",o,[(0,n.Wm)(r,{onClick:e.cancelRow},{default:(0,n.w5)((()=>[(0,n.Uk)("取 消")])),_:1},8,["onClick"]),(0,n.Wm)(r,{type:"primary",onClick:e.confirm},{default:(0,n.w5)((()=>[(0,n.Uk)("确 定")])),_:1},8,["onClick"])])])),default:(0,n.w5)((()=>[t])),_:1},8,["modelValue"])])}var u=a(4870),c=(0,n.aZ)({props:{delVisible:Boolean},emits:["cancelRow","confirm"],setup(e){const{proxy:l}=(0,n.FN)(),{delVisible:a}=(0,u.BK)(e),t=(0,u.iH)(a.value);function o(){l.$emit("cancelRow",!1)}function i(){l.$emit("confirm",null)}return(0,n.YP)(a,(e=>{t.value=e})),{centerDialogVisible:t,cancelRow:o,confirm:i}}}),r=a(89);const s=(0,r.Z)(c,[["render",i]]);var d=s},5328:function(e,l,a){a.r(l),a.d(l,{default:function(){return b}});var n=a(3396),t=a(7139);const o={class:"container"},i={class:"handle-box"};function u(e,l,a,u,c,r){const s=(0,n.up)("el-breadcrumb-item"),d=(0,n.up)("el-breadcrumb"),m=(0,n.up)("el-button"),f=(0,n.up)("el-input"),p=(0,n.up)("el-table-column"),b=(0,n.up)("el-table"),g=(0,n.up)("yin-del-dialog");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(d,{class:"crumbs",separator:"/"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.breadcrumbList,(e=>((0,n.wg)(),(0,n.j4)(s,{key:e.name,to:{path:e.path,query:e.query}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,t.zw)(e.name),1)])),_:2},1032,["to"])))),128))])),_:1}),(0,n._)("div",o,[(0,n._)("div",i,[(0,n.Wm)(m,{onClick:e.deleteAll},{default:(0,n.w5)((()=>[(0,n.Uk)("批量删除")])),_:1},8,["onClick"]),(0,n.Wm)(f,{placeholder:"筛选歌曲",modelValue:e.searchWord,"onUpdate:modelValue":l[0]||(l[0]=l=>e.searchWord=l)},null,8,["modelValue"])]),(0,n.Wm)(b,{height:"550px",border:"",size:"small",data:e.tableData,onSelectionChange:e.handleSelectionChange},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{type:"selection",width:"40",align:"center"}),(0,n.Wm)(p,{prop:"name",label:"歌手-歌曲"}),(0,n.Wm)(p,{label:"操作",width:"90",align:"center"},{default:(0,n.w5)((l=>[(0,n.Wm)(m,{type:"danger",onClick:a=>e.deleteRow(l.row.id)},{default:(0,n.w5)((()=>[(0,n.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"])]),(0,n.Wm)(g,{delVisible:e.delVisible,onConfirm:e.confirm,onCancelRow:l[1]||(l[1]=l=>e.delVisible=l)},null,8,["delVisible","onConfirm"])],64)}a(7658);var c=a(4870),r=a(65),s=a(2167),d=a(8968),m=(0,n.aZ)({components:{YinDelDialog:d.Z},setup(){const{proxy:e}=(0,n.FN)(),l=(0,r.oR)(),a=(0,c.iH)([]),t=(0,c.iH)([]),o=(0,n.Fl)((()=>l.getters.breadcrumbList)),i=(0,c.iH)("");async function u(){a.value=[],t.value=[];const l=await s.x.getCollectionOfUser(e.$route.query.id);for(let e of l.data){const l=await s.x.getSongOfId(e.songId);a.value.push(l.data[0]),t.value.push(l.data[0])}}(0,n.YP)(i,(()=>{if(""===i.value)a.value=t.value;else{a.value=[];for(let e of t.value)e.name.includes(i.value)&&a.value.push(e)}})),u();const d=(0,c.iH)(-1),m=(0,c.iH)([]),f=(0,c.iH)(!1);async function p(){const l=await s.x.deleteCollection(e.$route.query.id,d.value);e.$message({message:l.message,type:l.type}),l.success&&u(),f.value=!1}function b(e){d.value=e,f.value=!0}function g(e){m.value=e}function w(){for(let e of m.value)b(e.id),p();m.value=[]}return{searchWord:i,tableData:a,delVisible:f,breadcrumbList:o,deleteAll:w,handleSelectionChange:g,deleteRow:b,confirm:p}}}),f=a(89);const p=(0,f.Z)(m,[["render",u]]);var b=p}}]);
//# sourceMappingURL=328.4bcee41b.js.map