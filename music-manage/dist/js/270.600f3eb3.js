"use strict";(self["webpackChunkmusic_manage"]=self["webpackChunkmusic_manage"]||[]).push([[270],{8968:function(e,l,a){a.d(l,{Z:function(){return d}});var n=a(3396);const o=(0,n._)("div",{class:"del-dialog-cnt",align:"center"},"删除不可恢复，是否确定删除？",-1),t={class:"dialog-footer"};function i(e,l,a,i,r,s){const u=(0,n.up)("el-button"),c=(0,n.up)("el-dialog");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(c,{title:"提示",modelValue:e.centerDialogVisible,"onUpdate:modelValue":l[0]||(l[0]=l=>e.centerDialogVisible=l),width:"300px",center:""},{footer:(0,n.w5)((()=>[(0,n._)("span",t,[(0,n.Wm)(u,{onClick:e.cancelRow},{default:(0,n.w5)((()=>[(0,n.Uk)("取 消")])),_:1},8,["onClick"]),(0,n.Wm)(u,{type:"primary",onClick:e.confirm},{default:(0,n.w5)((()=>[(0,n.Uk)("确 定")])),_:1},8,["onClick"])])])),default:(0,n.w5)((()=>[o])),_:1},8,["modelValue"])])}var r=a(4870),s=(0,n.aZ)({props:{delVisible:Boolean},emits:["cancelRow","confirm"],setup(e){const{proxy:l}=(0,n.FN)(),{delVisible:a}=(0,r.BK)(e),o=(0,r.iH)(a.value);function t(){l.$emit("cancelRow",!1)}function i(){l.$emit("confirm",null)}return(0,n.YP)(a,(e=>{o.value=e})),{centerDialogVisible:o,cancelRow:t,confirm:i}}}),u=a(89);const c=(0,u.Z)(s,[["render",i]]);var d=c},8270:function(e,l,a){a.r(l),a.d(l,{default:function(){return w}});var n=a(3396),o=a(7139);const t={class:"container"},i={class:"handle-box"},r={class:"dialog-footer"};function s(e,l,a,s,u,c){const d=(0,n.up)("el-breadcrumb-item"),m=(0,n.up)("el-breadcrumb"),g=(0,n.up)("el-button"),p=(0,n.up)("el-input"),f=(0,n.up)("el-table-column"),w=(0,n.up)("el-table"),b=(0,n.up)("el-form-item"),v=(0,n.up)("el-form"),V=(0,n.up)("el-dialog"),h=(0,n.up)("yin-del-dialog");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(m,{class:"crumbs",separator:"/"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.breadcrumbList,(e=>((0,n.wg)(),(0,n.j4)(d,{key:e.name,to:{path:e.path,query:e.query}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(e.name),1)])),_:2},1032,["to"])))),128))])),_:1}),(0,n._)("div",t,[(0,n._)("div",i,[(0,n.Wm)(g,{onClick:e.deleteAll},{default:(0,n.w5)((()=>[(0,n.Uk)("批量删除")])),_:1},8,["onClick"]),(0,n.Wm)(p,{modelValue:e.searchWord,"onUpdate:modelValue":l[0]||(l[0]=l=>e.searchWord=l),placeholder:"筛选关键词"},null,8,["modelValue"]),(0,n.Wm)(g,{type:"primary",onClick:l[1]||(l[1]=l=>e.centerDialogVisible=!0)},{default:(0,n.w5)((()=>[(0,n.Uk)("添加歌曲")])),_:1})]),(0,n.Wm)(w,{height:"550px",border:"",size:"small",data:e.tableData,onSelectionChange:e.handleSelectionChange},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{type:"selection",width:"40",align:"center"}),(0,n.Wm)(f,{label:"ID",prop:"id",width:"50",align:"center"}),(0,n.Wm)(f,{label:"歌手-歌曲",prop:"name"}),(0,n.Wm)(f,{label:"操作",width:"90",align:"center"},{default:(0,n.w5)((l=>[(0,n.Wm)(g,{type:"danger",onClick:a=>e.deleteRow(l.row.id)},{default:(0,n.w5)((()=>[(0,n.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"])]),(0,n.Wm)(V,{title:"添加歌曲",modelValue:e.centerDialogVisible,"onUpdate:modelValue":l[5]||(l[5]=l=>e.centerDialogVisible=l)},{footer:(0,n.w5)((()=>[(0,n._)("span",r,[(0,n.Wm)(g,{onClick:l[4]||(l[4]=l=>e.centerDialogVisible=!1)},{default:(0,n.w5)((()=>[(0,n.Uk)("取 消")])),_:1}),(0,n.Wm)(g,{type:"primary",onClick:e.saveSong},{default:(0,n.w5)((()=>[(0,n.Uk)("确 定")])),_:1},8,["onClick"])])])),default:(0,n.w5)((()=>[(0,n.Wm)(v,{"label-width":"80px",model:e.registerForm},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{prop:"singerName",label:"歌手名字"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{modelValue:e.registerForm.singerName,"onUpdate:modelValue":l[2]||(l[2]=l=>e.registerForm.singerName=l)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(b,{prop:"songName",label:"歌曲名字"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{modelValue:e.registerForm.songName,"onUpdate:modelValue":l[3]||(l[3]=l=>e.registerForm.songName=l)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,n.Wm)(h,{delVisible:e.delVisible,onConfirm:e.confirm,onCancelRow:l[6]||(l[6]=l=>e.delVisible=l)},null,8,["delVisible","onConfirm"])],64)}a(7658),a(2062);var u=a(4870),c=a(65),d=a(2167),m=a(8968),g=(0,n.aZ)({components:{YinDelDialog:m.Z},setup(){const{proxy:e}=(0,n.FN)(),l=(0,c.oR)(),a=(0,u.iH)([]),o=(0,u.iH)([]),t=(0,n.Fl)((()=>l.getters.breadcrumbList)),i=(0,u.iH)("");async function r(){a.value=[],o.value=[];const l=await d.x.getListSongOfSongId(e.$route.query.id);for(let e of l.data){const l=await d.x.getSongOfId(e.songId);a.value.push(l.data[0]),o.value.push(l.data[0])}}(0,n.YP)(i,(()=>{if(""===i.value)a.value=o.value;else{a.value=[];for(let e of o.value)e.name.includes(i.value)&&a.value.push(e)}})),r();const s=(0,u.iH)(!1),m=(0,u.qj)({singerName:"",songName:""});async function g(){const e=`${m.singerName}-${m.songName}`,l=await d.x.getSongOfSingerName(e);l.success&&p(l.data[0].id)}async function p(l){let a=new URLSearchParams;a.append("songId",l),a.append("songListId",e.$route.query.id);const n=await d.x.setListSong(a);e.$message({message:n.message,type:n.type}),n.success&&r(),s.value=!1}const f=(0,u.iH)(-1),w=(0,u.iH)([]),b=(0,u.iH)(!1);async function v(){const l=await d.x.deleteListSong(f.value);e.$message({message:l.message,type:l.type}),l.success&&r(),b.value=!1}function V(e){f.value=e,b.value=!0}function h(e){w.value=e}function k(){for(let e of w.value)V(e.id),v();w.value=[]}return{searchWord:i,tableData:a,delVisible:b,centerDialogVisible:s,registerForm:m,breadcrumbList:t,deleteAll:k,handleSelectionChange:h,deleteRow:V,confirm:v,saveSong:g}}}),p=a(89);const f=(0,p.Z)(g,[["render",s]]);var w=f}}]);
//# sourceMappingURL=270.600f3eb3.js.map